<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <input type="text" />

    <script src="js/jquery.min.js"></script>
    <script src="js/vconsole.min.js"></script>
    <script>
        // new VConsole();

        // $("input[type='text']").on("input", function() {
        //     console.log($(this).val());
        //     $(this).val($(this).val().replace(/[^\w\u4E00-\u9FA5]/g,''));
        // });

        // var flag = true;
        // $('input').on({
        //     compositionstart: function() {
        //         flag = false;
        //     },
        //     compositionend: function() {
        //         flag = true;
        //     },
        //     input: function() {
        //         var _this = this;
        //         setTimeout(function(){
        //             if(flag){
        //                 console.log($(_this).val());
        //                 // \w: 查找单词字符(a-z、A-Z、0-9、以及下划线_)
        //                 // $(_this).val($(_this).val().replace(/[^\w\u4E00-\u9FA5]/g,''));
        //                 $(_this).val($(_this).val().replace(/[^0-9a-zA-Z\u4E00-\u9FA5]/g,''));
        //             }
        //         }, 0);
        //     }
        // });

        var Page = {
            flag: true,
            init: function() {
                var _this = this;
                $("input[type='text']").on({
                    compositionstart: function() {
                        _this.flag = false;
                    },
                    compositionend: function() {
                        _this.flag = true;
                    },
                    input: function() {
                        if (_this.flag) {
                            $(this).val($(this).val().replace(/[^0-9a-zA-Z\u4E00-\u9FA5]/g,''));
                        }
                    },
                    blur: function() {
                        $(this).val($(this).val().replace(/[^0-9a-zA-Z\u4E00-\u9FA5]/g,''));
                    }
                });
            }
        };

        Page.init();
    </script>
</body>
</html>